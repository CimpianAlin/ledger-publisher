const searchEngines = [
  'baidu',
  'bing',
  'dogpile',
  'google',
  'ixquick',
  'kvasir',
  'searx',
  'sogou',
  'yahoo',
  'yandex',
  'youdao']

const searchEnginesSLD = [
  '123rf.com',
  '1337x.to',
  '2gis.ru',
  '99acres.com',
  'abidjan.net',
  'alldatasheet.com',
  'alluc.ee',
  'applyweb.com',
  'ask.com',
  'aviasales.ru',
  'bab.la',
  'bdjobs.com',
  'biblestudytools.com',
  'bitsnoop.com',
  'blablacar.ru',
  'brasilescola.uol.com.br',
  'bringmesports.com',
  'btso.pw',
  'carsensor.net',
  'cengagebrain.com',
  'cineplex.com',
  'cnrs.fr',
  'consultant.ru',
  'couch-tuner.city',
  'dasoertliche.de',
  'delish.com',
  'dice.com',
  'discretesearch.com',
  'downspeedtest.com',
  'duckduckgo.com',
  'ecosia.org',
  'edgesuite.net',
  'elastic.co',
  'emojipedia.org',
  'experts-exchange.com',
  'feebee.com.tw',
  'findanime.ru',
  'findwide.com',
  'fl.ru',
  'flexmls.com',
  'futhead.com',
  'gettyimages.com',
  'gnavi.co.jp',
  'goglogo.com',
  'governmentjobs.com',
  'haosou.com',
  'hinkhoj.com',
  'hotelscombined.com',
  'howtosimplified.com',
  'ikman.lk',
  'indeed.ae',
  'indeed.co.uk',
  'indeed.com',
  'indeed.fr',
  'instamp3.co',
  'instantcheckmate.com',
  'intercambiosvirtuales.org',
  'iplayer.fm',
  'isohunt.to',
  'istockphoto.com',
  'jal.co.jp',
  'jalan.net',
  'jeevansathi.com',
  'jobrapido.com',
  'k331dy4xl4.com',
  'katcr.to',
  'katproxy.al',
  'kayak.com',
  'kickass.cd',
  'kickasstop.net',
  'kinopoisk.ru',
  'kopp-verlag.de',
  'linguee.com',
  'linguee.de',
  'linguee.es',
  'linguee.fr',
  'makeagif.com',
  'mangvieclam.com',
  'mappy.com',
  'marinetraffic.com',
  'masaladesi.com',
  'masutabe.info',
  'mediaget.com',
  'megashare.su',
  'meinestadt.de',
  'meta.ua',
  'mizanonline.ir',
  'monster.co.uk',
  'monster.com',
  'mos.ru',
  'moviefone.com',
  'mp3juices.cc',
  'mulpix.com',
  'myprivatesearch.com',
  'mystartsearch.com',
  'mytorrents.org',
  'myvidster.com',
  'myway.com',
  'neswangy.net',
  'newsru.com',
  'nn.ru',
  'oursurfing.com',
  'pages.tmall.com',
  'pagesperso-orange.fr',
  'picclick.co.uk',
  'pron.tv',
  'property24.com',
  'quia.com',
  'qwant.com',
  'rabota.ru',
  'rabota.ua',
  'radiorage.com',
  'rambler.ru',
  'rdsa2014.com',
  'realtor.com',
  'rightmove.co.uk',
  'rome2rio.com',
  'roshd.ir',
  'rozklad-pkp.pl',
  'rule34.xxx',
  'sabwap.com',
  'search.com',
  'searchengineland.com',
  'searchincognito.com',
  'searchlock.com',
  'seek.com.au',
  'shine.com',
  'shutterstock.com',
  'siteadvisor.com',
  'skyscanner.com',
  'slack.com',
  'slickdeals.net',
  'so.com',
  'soso.com',
  'spigotmc.org',
  'spokeo.com',
  'sporx.com',
  'start.me',
  'studopedia.org',
  'suapesquisa.com',
  'symbolab.com',
  'tasteofhome.com',
  'themuse.com',
  'theprofitsmaker.net',
  'thesaurus.com',
  'tineye.com',
  'torlock.com',
  'torrentdownloads.me',
  'torrentfunk.com',
  'torrentking.eu',
  'torrentproject.se',
  'torrentz2.eu',
  'totaljobs.com',
  'trafficfactory.biz',
  'translate.ru',
  'tripadvisor.ca',
  'tripadvisor.co.uk',
  'tripadvisor.com',
  'tripadvisor.de',
  'tripadvisor.es',
  'tripadvisor.in',
  'tripadvisor.it',
  'tripadvisor.ru',
  'ubc.ca',
  'ucas.com',
  'unfaithfulxxx.com',
  'usa.gov',
  'utorrentmui.com',
  'veporn.net',
  'wallpapercave.com',
  'weblio.jp',
  'webssearches.com',
  'who.is',
  'whois.net',
  'withgoogle.com',
  'wolframalpha.com',
  'wonderhowto.com',
  'work.ua',
  'yify-torrent.org',
  'yifymovie.re',
  'yourcinema.tv',
  'youth.cn',
  'zezoomglobal.com',
  'zillow.com',
  'ziprecruiter.com',
  'zoopla.co.uk',
  'zybang.com']

const regexpEscape = function (s) { return s.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&') }

module.exports = {
  retrieve: function (cb) {
    cb(null, searchEnginesSLD.concat(searchEngines))
  },

  build: function (cb) {
    const transformedList = searchEngines.map((item) => { return `'${item}'` }).join(', ')
    var condition = `(new Set([ ${transformedList} ])).has(SLD.split('.')[0])`
    searchEnginesSLD.forEach(function (SLD) {
      condition += ' || /' + regexpEscape(SLD) + '$/.test(SLD)'
    })

    const rule = {
      condition: condition,
      consequent: null,
      description: 'exclude search engines'
    }
    cb(null, rule)
  }
}
