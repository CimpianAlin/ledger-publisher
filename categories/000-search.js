const searchEngines = [
  'baidu',
  'bing',
  'dogpile',
  'google',
  'ixquick',
  'kvasir',
  'searx',
  'sogou',
  'yahoo',
  'yandex',
  'youdao'
]

const searchEnginesSLD = [
  '123rf.com',
  '1337x.pl',
  '1337x.to',
  '2gis.ru',
  '911tabs.com',
  '99acres.com',
  'abidjan.net',
  'adoptapet.com',
  'alldatasheet.com',
  'alluc.ee',
  'alvinalexander.com',
  'animelyrics.com',
  'applyweb.com',
  'asianpornohub.com',
  'ask.com',
  'askiven.com',
  'ati.su',
  'audiusa.com',
  'aviasales.ru',
  'bab.la',
  'barchart.com',
  'bdjobs.com',
  'bedetheque.com',
  'beenverified.com',
  'bingj.com',
  'binsearch.info',
  'bitsnoop.com',
  'bl.uk',
  'blablacar.ru',
  'blueletterbible.org',
  'boxrec.com',
  'brasilescola.uol.com.br',
  'bringmesports.com',
  'btso.pw',
  'bubbaporn.com',
  'buzzsumo.com',
  'canada411.ca',
  'careesma.in',
  'carsensor.net',
  'cengagebrain.com',
  'cgtrader.com',
  'cineplex.com',
  'cnrs.fr',
  'coladaweb.com',
  'collegedunia.com',
  'consultant.ru',
  'coolpc.com.tw',
  'couch-tuner.city',
  'cv-library.co.uk',
  'dasoertliche.de',
  'dice.com',
  'diggbt.pw',
  'discretesearch.com',
  'doklad.ru',
  'downspeedtest.com',
  'duckduckgo.com',
  'earthcam.com',
  'ecosia.org',
  'edgesuite.net',
  'edreams.com',
  'educacao.uol.com.br',
  'elastic.co',
  'emojipedia.org',
  'encyclopediadramatica.se',
  'experts-exchange.com',
  'feebee.com.tw',
  'fender.com',
  'findanime.ru',
  'findchips.com',
  'findicons.com',
  'findwide.com',
  'fl.ru',
  'flexmls.com',
  'flickrhivemind.net',
  'futhead.com',
  'gaijinpot.com',
  'gettyimages.com',
  'gnavi.co.jp',
  'goglogo.com',
  'goha.ru',
  'governmentjobs.com',
  'guitaretab.com',
  'gulftalent.com',
  'haosou.com',
  'hinkhoj.com',
  'hostloc.com',
  'hotellook.com',
  'hotelscombined.com',
  'howtosimplified.com',
  'ikman.lk',
  'imgfarm.com',
  'indeed.ae',
  'indeed.co.uk',
  'indeed.com',
  'indeed.fr',
  'inep.gov.br',
  'inria.fr',
  'instamp3.co',
  'instantcheckmate.com',
  'intercambiosvirtuales.org',
  'internet-start.net',
  'iplayer.fm',
  'isohunt.to',
  'istockphoto.com',
  'ixigo.com',
  'izito.com',
  'jal.co.jp',
  'jalan.net',
  'jeevansathi.com',
  'jobrapido.com',
  'jobs.ac.uk',
  'jobs2careers.com',
  'jora.com',
  'justwatch.com',
  'k331dy4xl4.com',
  'katcr.to',
  'katproxy.al',
  'kayak.com',
  'keyword-suggestions.com',
  'kickass.cd',
  'kickasstop.net',
  'kickasstorrents.eu',
  'kinopoisk.ru',
  'kiwi.com',
  'kopp-verlag.de',
  'learn4good.com',
  'lightxxxtube.com',
  'linguee.com',
  'linguee.de',
  'linguee.es',
  'linguee.fr',
  'lmgtfy.com',
  'local.ch',
  'looksmart.com',
  'loudtronix.co',
  'makeagif.com',
  'manageflitter.com',
  'mangvieclam.com',
  'mappy.com',
  'maricopa.edu',
  'marinetraffic.com',
  'masaladesi.com',
  'masterseek.com',
  'mastersportal.eu',
  'masutabe.info',
  'mediaget.com',
  'megaserial.net',
  'megashare.su',
  'meinestadt.de',
  'meta.ua',
  'mineplex.com',
  'mizanonline.ir',
  'mob.org',
  'monster.ca',
  'monster.co.uk',
  'monster.com',
  'mos.ru',
  'moviefone.com',
  'mp3eee.com',
  'mp3juices.cc',
  'mulpix.com',
  'musicmp3.ru',
  'myprivatesearch.com',
  'mysites123.com',
  'mystartsearch.com',
  'mytorrents.org',
  'mytransitguide.com',
  'myvidster.com',
  'myway.com',
  'nationalarchives.gov.uk',
  'natok24.com',
  'neswangy.net',
  'nn.ru',
  'nudez.com',
  'nzbindex.nl',
  'oursurfing.com',
  'pages.tmall.com',
  'pagesperso-orange.fr',
  'pdfdrive.net',
  'picclick.ca',
  'picclick.co.uk',
  'pnet.co.za',
  'pron.tv',
  'property24.com',
  'quia.com',
  'qwant.com',
  'rabota.ru',
  'rabota.ua',
  'radiorage.com',
  'rambler.ru',
  'rdsa2014.com',
  'realtor.com',
  'rec-tube.com',
  'rent.com',
  'rightmove.co.uk',
  'roadtovr.com',
  'rome2rio.com',
  'roshd.ir',
  'rosrabota.ru',
  'rozklad-pkp.pl',
  'rule34.xxx',
  'sabwap.com',
  'search-privacy.info',
  'search.com',
  'searchengineland.com',
  'searchincognito.com',
  'searchlock.com',
  'seek.com.au',
  'serato.com',
  'sextreffen69.de',
  'shine.com',
  'shutterstock.com',
  'siska.tv',
  'siteadvisor.com',
  'skyscanner.com',
  'slack.com',
  'slickdeals.net',
  'so.com',
  'soloporno.xxx',
  'soso.com',
  'spigotmc.org',
  'spokeo.com',
  'sporx.com',
  'squirt.org',
  'start.me',
  'studopedia.org',
  'suapesquisa.com',
  'subtitleseeker.com',
  'suddenlink.net',
  'suggest-keywords.com',
  'swoodoo.com',
  'symbolab.com',
  'tabletwise.com',
  'tanqeeb.com',
  'tech-connect.biz',
  'themuse.com',
  'theprofitsmaker.net',
  'tineye.com',
  'tokyotosho.info',
  'torlock.com',
  'torrent-finder.info',
  'torrentdownloads.me',
  'torrentfunk.com',
  'torrentking.eu',
  'torrentproject.se',
  'torrenty.to',
  'torrentz.rocks',
  'torrentz2.eu',
  'totaljobs.com',
  'trafficfactory.biz',
  'translate.ru',
  'trellian.com',
  'tripadvisor.ca',
  'tripadvisor.co.uk',
  'tripadvisor.co.za',
  'tripadvisor.com',
  'tripadvisor.com.ar',
  'tripadvisor.de',
  'tripadvisor.es',
  'tripadvisor.in',
  'tripadvisor.it',
  'tripadvisor.ru',
  'trovit.co.in',
  'trovit.com.mx',
  'tubepornup.com',
  'twicsy.com',
  'ubc.ca',
  'ucas.com',
  'usa.gov',
  'utorrentmui.com',
  'vog.gr',
  'wallpapercave.com',
  'weblio.jp',
  'webssearches.com',
  'wellcame.net',
  'whitexxxtube.com',
  'who.is',
  'whois.net',
  'windstream.net',
  'wipo.int',
  'withgoogle.com',
  'wmflabs.org',
  'wordfind.com',
  'work.ua',
  'yify-torrent.org',
  'yifymovie.re',
  'yourcinema.tv',
  'youth.cn',
  'zapmeta.de',
  'zarplata.ru',
  'zezoomglobal.com',
  'zillow.com',
  'ziprecruiter.com',
  'zocdoc.com',
  'zoopla.co.uk',
  'zybang.com'
]

const regexpEscape = function (s) { return s.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&') }

module.exports = {
  retrieve: function (cb) {
    cb(null, searchEnginesSLD.concat(searchEngines))
  },

  build: function (cb) {
    const transformedList = searchEngines.map((item) => { return `'${item}'` }).join(', ')
    var condition = `(new Set([ ${transformedList} ])).has(SLD.split('.')[0])`
    searchEnginesSLD.forEach(function (SLD) {
      condition += ' || /' + regexpEscape(SLD) + '$/.test(SLD)'
    })

    const rule = {
      condition: condition,
      consequent: null,
      description: 'exclude search engines'
    }
    cb(null, rule)
  }
}
