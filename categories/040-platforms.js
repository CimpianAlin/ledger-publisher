const platforms = [
  'bilibili',
  'blogger',
  'blogspot',
  'craigslist',
  'ello',
  'facebook',
  'github',
  'imgur',
  'instagram',
  'linkedin',
  'livejournal',
  'medium',
  'nextdoor',
  'pinterest',
  'quora',
  'slack',
  'stackoverflow',
  'twitter',
  'vk',
  'xvideos',
  'youku',
  'youtube']

const platformsSLD = [
  '1111.com.tw',
  '17k.com',
  '17track.net',
  '20min.ch',
  '2ch.net',
  '36kr.com',
  '4chan.org',
  '500px.com',
  '51auto.com',
  '52pk.com',
  '9gag.com',
  'academia.edu',
  'adbooth.com',
  'addthis.com',
  'addtoany.com',
  'adyou.me',
  'airbnb.com',
  'alimama.com',
  'alipay.com',
  'alitrip.com',
  'allrecipes.com',
  'alodokter.com',
  'ameblo.jp',
  'anjuke.com',
  'aparat.com',
  'appannie.com',
  'appgame.com',
  'arduino.cc',
  'artstation.com',
  'ask.fm',
  'asp.net',
  'auspost.com.au',
  'autotrader.com',
  'avito.ru',
  'azure.com',
  'babytree.com',
  'backpage.com',
  'badoo.com',
  'basecamp.com',
  'bigcommerce.com',
  'bitauto.com',
  'bitbucket.org',
  'blobla.com',
  'blog.jp',
  'blogfa.com',
  'books.com.tw',
  'bozhong.com',
  'brainyquote.com',
  'btcclicks.com',
  'buffer.com',
  'buzzfeed.com',
  'bzw315.com',
  'calameo.com',
  'canadapost.ca',
  'canalblog.com',
  'canva.com',
  'cb01.pw',
  'chiphell.com',
  'cint.com',
  'cnblogs.com',
  'cocolog-nifty.com',
  'colorlib.com',
  'commonhealth.com.tw',
  'csdn.net',
  'cyberciti.biz',
  'cybozu.com',
  'deezer.com',
  'deviantart.com',
  'dhl.de',
  'digitalocean.com',
  'directrev.com',
  'dochub.com',
  'docker.com',
  'douyu.com',
  'dropbox.com',
  'drupal.org',
  'duomai.com',
  'e-monsite.com',
  'elcomercio.com',
  'evernote.com',
  'exblog.jp',
  'excite.co.jp',
  'extraimage.net',
  'extratorrent.cc',
  'fanfiction.net',
  'fanli.com',
  'farfetch.com',
  'farpost.ru',
  'fbcdn.net',
  'fc2.com',
  'feedly.com',
  'filefactory.com',
  'files.wordpress.com',
  'finanzen.net',
  'firestorage.jp',
  'flickr.com',
  'force.com',
  'fullhdfilmizlesene.org',
  'gaana.com',
  'gdeposylka.ru',
  'gfycat.com',
  'girlsaskguys.com',
  'gjoyz.com',
  'glassdoor.co.in',
  'glassdoor.com',
  'gnula.nu',
  'gongchang.com',
  'gry-online.pl',
  'gumtree.pl',
  'hatena.ne.jp',
  'hatenablog.com',
  'hclips.com',
  'here.com',
  'heroku.com',
  'hizliresim.com',
  'hk01.com',
  'hrloo.com',
  'hubspot.com',
  'huffingtonpost.com',
  'iemo.jp',
  'ifixit.com',
  'imgbox.com',
  'imgchili.net',
  'indeed.co.in',
  'indiapost.gov.in',
  'instructables.com',
  'invisionapp.com',
  'iqiyi.com',
  'issuu.com',
  'japanpost.jp',
  'jimdo.com',
  'jkforum.net',
  'jwplayer.com',
  'kahoot.it',
  'kaskus.co.id',
  'kickstarter.com',
  'leagueoflegends.com',
  'leboncoin.fr',
  'librus.pl',
  'lineblog.me',
  'litv.tv',
  'livedoor.jp',
  'livelib.ru',
  'lofter.com',
  'ly.com',
  'mama.cn',
  'mamaclub.com',
  'media.tumblr.com',
  'mediafire.com',
  'mercadolibre.com.ar',
  'mercadolivre.com.br',
  'merriam-webster.com',
  'mileroticos.com',
  'mobafire.com',
  'mp3goo.com',
  'mql5.com',
  'mynet.com',
  'myvidster.com',
  'naukri.com',
  'newgrounds.com',
  'nicovideo.jp',
  'nitroflare.com',
  'office.com',
  'ok.ru',
  'olx.co.ao',
  'olx.com.pk',
  'olx.ph',
  'olx.pt',
  'onet.pl',
  'oomall.com',
  'ouest-france.fr',
  'outbrain.com',
  'over-blog.com',
  'paigeeworld.com',
  'pantip.com',
  'parenting.com.tw',
  'peopleperhour.com',
  'pixiv.net',
  'pixnet.net',
  'playbuzz.com',
  'plays.tv',
  'po.st',
  'poringa.net',
  'poste.it',
  'powerschool.com',
  'prezi.com',
  'puu.sh',
  'qiita.com',
  'qualtrics.com',
  'quikr.com',
  'quizlet.com',
  'qyer.com',
  'redbus.in',
  'repelis.tv',
  'researchgate.net',
  'roblox.com',
  'rumble.com',
  'ruten.com.tw',
  'safefinder.com',
  'salesforce.com',
  'segmentfault.com',
  'share-online.biz',
  'sharepoint.com',
  'shopify.com',
  'shutterfly.com',
  'sina.com.cn',
  'sinaimg.cn',
  'skyrock.com',
  'sli.mg',
  'smallpdf.com',
  'smugmug.com',
  'socialtrade.biz',
  'solidfiles.com',
  'soundcloud.com',
  'souq.com',
  'stackexchange.com',
  'steamcommunity.com',
  'steampowered.com',
  'subito.it',
  'tableau.com',
  'taboola.com',
  'taringa.net',
  'techsmith.com',
  'thisav.com',
  'tianya.cn',
  'tistory.com',
  'to8to.com',
  'trustpilot.com',
  'tudou.com',
  'tumblr.com',
  'turbobit.net',
  'tusfiles.net',
  'tvbs.com.tw',
  'twitch.tv',
  'twoo.com',
  'txxx.com',
  'tympanus.net',
  'ubuntu.com',
  'umeng.com',
  'unity3d.com',
  'uploaded.net',
  'uproxx.com',
  'vid.me',
  'vidup.me',
  'vimeo.com',
  'visualstudio.com',
  'vivo.sx',
  'vmall.com',
  'wattpad.com',
  'webinarjam.net',
  'weebly.com',
  'weheartit.com',
  'weibo.com',
  'wittyfeed.com',
  'wix.com',
  'wixsite.com',
  'wolfram.com',
  'woocommerce.com',
  'wordpress.com',
  'wordpress.org',
  'wp.com',
  'xuite.net',
  'yinxiang.com',
  'yourbittorrent.com',
  'yourstory.com',
  'youtube-mp3.org',
  'zedo.com',
  'zhihu.com',
  'zillow.com',
  'znanija.com',
  'zoom.us']

const regexpEscape = function (s) { return s.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&') }

module.exports = {
  retrieve: function (cb) {
    cb(null, platformsSLD.concat(platforms))
  },

  build: function (cb) {
    const transformedList = platforms.map((item) => { return `'${item}'` }).join(', ')
    var condition = `(new Set([ ${transformedList} ])).has(SLD.split('.')[0])`
    platformsSLD.forEach(function (SLD) {
      condition += ' || /' + regexpEscape(SLD) + '$/.test(SLD)'
    })

    const rule = {
      condition: condition,
      consequent: null,
      description: 'exclude platforms'
    }
    cb(null, rule)
  }
}
