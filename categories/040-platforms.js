const platforms = [
  'bilibili',
  'blogger',
  'blogspot',
  'craigslist',
  'ello',
  'facebook',
  'github',
  'imgur',
  'instagram',
  'linkedin',
  'livejournal',
  'medium',
  'nextdoor',
  'pinterest',
  'quora',
  'slack',
  'stackoverflow',
  'twitter',
  'vk',
  'xvideos',
  'youku',
  'youtube'
]

const platformsSLD = [
  '1111.com.tw',
  '17k.com',
  '17track.net',
  '2ch.net',
  '36kr.com',
  '4cdn.org',
  '4chan.org',
  '500px.com',
  '51auto.com',
  '52pk.com',
  '95516.com',
  '9gag.com',
  'academia.edu',
  'adbooth.com',
  'addthis.com',
  'addtoany.com',
  'adyou.me',
  'ahashare.com',
  'ahnegao.com.br',
  'airbnb.com',
  'alimama.com',
  'alipay.com',
  'alitrip.com',
  'alodokter.com',
  'ameblo.jp',
  'anjuke.com',
  'aparat.com',
  'appannie.com',
  'appgame.com',
  'arcgis.com',
  'artstation.com',
  'asianfanfics.com',
  'ask.fm',
  'asp.net',
  'auspost.com.au',
  'auth0.com',
  'autotrader.com',
  'avaaz.org',
  'avangate.com',
  'avito.ru',
  'awm.com',
  'azure.com',
  'babytree.com',
  'backpage.com',
  'badoo.com',
  'basecamp.com',
  'bigcommerce.com',
  'bit-torrent.in',
  'bitauto.com',
  'bitbucket.org',
  'bitrix24.com',
  'bittorrent.com',
  'blobla.com',
  'blog.jp',
  'blogcu.com',
  'blogfa.com',
  'bloggersarena.com',
  'boards.net',
  'bolha.com',
  'books.com.tw',
  'bozhong.com',
  'brainly.com.br',
  'brainyquote.com',
  'btcclicks.com',
  'buffer.com',
  'bufferapp.com',
  'bzw315.com',
  'calameo.com',
  'canadapost.ca',
  'canalblog.com',
  'canva.com',
  'careerbuilder.com',
  'cb01.pw',
  'centerblog.net',
  'chiphell.com',
  'cint.com',
  'claimbtc.com',
  'cloudfile.co',
  'cnblogs.com',
  'cocolog-nifty.com',
  'codeplex.com',
  'colorlib.com',
  'commonhealth.com.tw',
  'counter-strike.net',
  'crunchbase.com',
  'csdn.net',
  'cybozu.com',
  'dealnews.com',
  'deezer.com',
  'depositfiles.com',
  'desirulez.me',
  'deutschepost.de',
  'deviantart.com',
  'dhl.de',
  'digitalocean.com',
  'directrev.com',
  'dochub.com',
  'docker.com',
  'dopa.com.cn',
  'douyu.com',
  'dropbox.com',
  'dumpaday.com',
  'duomai.com',
  'e-monsite.com',
  'elcomercio.com',
  'epom.com',
  'evernote.com',
  'exacttarget.com',
  'exblog.jp',
  'excite.co.jp',
  'extraimage.net',
  'extratorrent.cc',
  'fabric.io',
  'fanfiction.net',
  'fanli.com',
  'fanpop.com',
  'farfetch.com',
  'farpost.ru',
  'fb.com',
  'fbcdn.net',
  'fc2.com',
  'feedly.com',
  'filefactory.com',
  'files.wordpress.com',
  'finanzen.net',
  'firestorage.jp',
  'flickr.com',
  'force.com',
  'forumcommunity.net',
  'fullhdfilmizlesene.org',
  'gaana.com',
  'gametwist.com',
  'gdeposylka.ru',
  'gfycat.com',
  'girlsaskguys.com',
  'gjoyz.com',
  'glassdoor.co.in',
  'glassdoor.com',
  'gnula.nu',
  'gongchang.com',
  'gopro.com',
  'gry-online.pl',
  'gumtree.pl',
  'hatena.ne.jp',
  'hatenablog.com',
  'hclips.com',
  'here.com',
  'heroku.com',
  'heroquizz.com',
  'hightail.com',
  'hizliresim.com',
  'hk01.com',
  'hrloo.com',
  'hubspot.com',
  'hubspot.net',
  'iconarchive.com',
  'iemo.jp',
  'ifixit.com',
  'imgbox.com',
  'imgchili.net',
  'indeed.co.in',
  'indiapost.gov.in',
  'invisionapp.com',
  'iqiyi.com',
  'ispot.news',
  'issuu.com',
  'italia-film.me',
  'itslearning.com',
  'japanpost.jp',
  'jimdo.com',
  'jkforum.net',
  'jumia.com.eg',
  'jwplayer.com',
  'kahoot.it',
  'kaskus.co.id',
  'kat.how',
  'kataweb.it',
  'katfile.com',
  'kickstarter.com',
  'leadpages.co',
  'leagueoflegends.com',
  'leboncoin.fr',
  'librus.pl',
  'lineblog.me',
  'linkwithin.com',
  'litv.tv',
  'livedoor.jp',
  'livelib.ru',
  'lofter.com',
  'ly.com',
  'lyricsmode.com',
  'mama.cn',
  'mamaclub.com',
  'media.tumblr.com',
  'mediafire.com',
  'mercadolibre.com.ar',
  'mercadolivre.com.br',
  'mileroticos.com',
  'minecraftskins.com',
  'mobafire.com',
  'monsterindia.com',
  'mp3goo.com',
  'mql5.com',
  'mynet.com',
  'myvidster.com',
  'naukri.com',
  'naukrigulf.com',
  'netotrade.com',
  'newgrounds.com',
  'nicovideo.jp',
  'nitroflare.com',
  'niume.com',
  'nuget.org',
  'office.com',
  'ok.ru',
  'olx.co.ao',
  'olx.com.pk',
  'olx.ph',
  'olx.pt',
  'onehallyu.com',
  'onet.pl',
  'oomall.com',
  'otakukart.com',
  'ouest-france.fr',
  'outbrain.com',
  'over-blog.com',
  'paigeeworld.com',
  'pantip.com',
  'parenting.com.tw',
  'parsiblog.com',
  'paybox.com',
  'pbworks.com',
  'peopleperhour.com',
  'phoenixads.co.in',
  'pixieset.com',
  'pixiv.net',
  'pixnet.net',
  'playbuzz.com',
  'plays.tv',
  'pluralsight.com',
  'po.st',
  'poringa.net',
  'poste.it',
  'powerschool.com',
  'prezi.com',
  'pulsk.com',
  'puu.sh',
  'qiita.com',
  'qualtrics.com',
  'quickmeme.com',
  'quikr.com',
  'quizlet.com',
  'qyer.com',
  're-direcciona.me',
  'redbus.in',
  'repelis.tv',
  'researchgate.net',
  'roblox.com',
  'rockfile.eu',
  'rumble.com',
  'ruten.com.tw',
  'safefinder.com',
  'salesforce.com',
  'scotch.io',
  'segmentfault.com',
  'share-online.biz',
  'sharepoint.com',
  'shopify.com',
  'shutterfly.com',
  'sina.com.cn',
  'sinaimg.cn',
  'siteground.com',
  'skillshare.com',
  'skyrock.com',
  'skyscrapercity.com',
  'sli.mg',
  'slideplayer.com',
  'smallpdf.com',
  'smartrecruiters.com',
  'smugmug.com',
  'snagajob.com',
  'socialtrade.biz',
  'solidfiles.com',
  'soundcloud.com',
  'souq.com',
  'steamcommunity.com',
  'steampowered.com',
  'storify.com',
  'studyblue.com',
  'subito.it',
  'tableau.com',
  'taboola.com',
  'taringa.net',
  'techsmith.com',
  'thisav.com',
  'thwglobal.com',
  'tianya.cn',
  'timesjobs.com',
  'tistory.com',
  'to8to.com',
  'trustpilot.com',
  'tudou.com',
  'tumblr.com',
  'turbobit.net',
  'tusfiles.net',
  'tvbs.com.tw',
  'twitch.tv',
  'twoo.com',
  'txxx.com',
  'typekit.com',
  'typepad.com',
  'ubuntu.com',
  'umeng.com',
  'unity.com',
  'unity3d.com',
  'unzipper.com',
  'uploaded.net',
  'uproxx.com',
  'venmo.com',
  'veoh.com',
  'vid.me',
  'vidup.me',
  'vimeo.com',
  'visualstudio.com',
  'vivo.sx',
  'vmall.com',
  'wattpad.com',
  'webcamtoy.com',
  'webinarjam.net',
  'weebly.com',
  'weheartit.com',
  'weibo.com',
  'wevideo.com',
  'whicdn.com',
  'wittyfeed.com',
  'wix.com',
  'wixsite.com',
  'wolfram.com',
  'woocommerce.com',
  'wordpress.com',
  'wp.com',
  'xitu.io',
  'xpg.uol.com.br',
  'xuite.net',
  'yinxiang.com',
  'yourarticlelibrary.com',
  'yourbittorrent.com',
  'yourstory.com',
  'yout.com',
  'youtube-mp3.org',
  'yumpu.com',
  'zedo.com',
  'zhihu.com',
  'zillow.com',
  'znanija.com',
  'zoom.us',
  'zoominfo.com'
]

const regexpEscape = function (s) { return s.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&') }

module.exports = {
  retrieve: function (cb) {
    cb(null, platformsSLD.concat(platforms))
  },

  build: function (cb) {
    const transformedList = platforms.map((item) => { return `'${item}'` }).join(', ')
    var condition = `(new Set([ ${transformedList} ])).has(SLD.split('.')[0])`
    platformsSLD.forEach(function (SLD) {
      condition += ' || /' + regexpEscape(SLD) + '$/.test(SLD)'
    })

    const rule = {
      condition: condition,
      consequent: null,
      description: 'exclude platforms'
    }
    cb(null, rule)
  }
}
