const platforms = [
  'bilibili',
  'blogger',
  'blogspot',
  'craigslist',
  'ello',
  'facebook',
  'github',
  'imgur',
  'instagram',
  'linkedin',
  'livejournal',
  'medium',
  'nextdoor',
  'pinterest',
  'quora',
  'slack',
  'stackoverflow',
  'twitter',
  'vk',
  'xvideos',
  'youku',
  'youtube'
]

const platformsSLD = [
  '1111.com.tw',
  '17k.com',
  '17track.net',
  '2ch.net',
  '36kr.com',
  '4cdn.org',
  '4chan.org',
  '500px.com',
  '51auto.com',
  '52pk.com',
  '7-themes.com',
  '95516.com',
  '9gag.com',
  'academia.edu',
  'adbooth.com',
  'addthis.com',
  'addtoany.com',
  'adworkmedia.com',
  'adyou.me',
  'ahashare.com',
  'ahnegao.com.br',
  'airbnb.com',
  'alimama.com',
  'alipay.com',
  'alitrip.com',
  'alodokter.com',
  'ameblo.jp',
  'ancient.eu',
  'androidworld.it',
  'anjuke.com',
  'aparat.com',
  'apastyle.org',
  'appannie.com',
  'appcrawlr.com',
  'appgame.com',
  'apunkagames.net',
  'arcgis.com',
  'artstation.com',
  'asianfanfics.com',
  'ask.fm',
  'asp.net',
  'astrology-zodiac-signs.com',
  'auspost.com.au',
  'auth0.com',
  'authorstream.com',
  'autotrader.com',
  'avaaz.org',
  'avangate.com',
  'avito.ru',
  'awm.com',
  'azquotes.com',
  'azure.com',
  'babytree.com',
  'backpage.com',
  'badoo.com',
  'bangkokpost.com',
  'basecamp.com',
  'bigcommerce.com',
  'biggerpockets.com',
  'bit-torrent.in',
  'bitauto.com',
  'bitbucket.org',
  'bitrix24.com',
  'bitshare.com',
  'bittorrent.com',
  'blobla.com',
  'blog.jp',
  'blogcu.com',
  'blogfa.com',
  'bloggersarena.com',
  'blogs.com',
  'blogtalkradio.com',
  'blogto.com',
  'blurb.com',
  'boards.net',
  'bolha.com',
  'bollywoodlover.com',
  'books.com.tw',
  'bozhong.com',
  'brainly.com.br',
  'brainyquote.com',
  'brightcove.com',
  'btcclicks.com',
  'btshoufa.net',
  'buffer.com',
  'bufferapp.com',
  'bugmenot.com',
  'businesscatalyst.com',
  'bzw315.com',
  'calameo.com',
  'canadapost.ca',
  'canalblog.com',
  'canva.com',
  'careerbuilder.com',
  'cargocollective.com',
  'cb01.pw',
  'centerblog.net',
  'chemicalbook.com',
  'chiphell.com',
  'cint.com',
  'claimbtc.com',
  'cloudera.com',
  'cloudfile.co',
  'cloudy.ec',
  'cnblogs.com',
  'cocolog-nifty.com',
  'cocubes.com',
  'codechef.com',
  'codeplex.com',
  'coderwall.com',
  'colorlib.com',
  'colourlovers.com',
  'com-coupons.win',
  'commonhealth.com.tw',
  'convertkit.com',
  'cooks.com',
  'coolors.co',
  'cooltest.me',
  'counter-strike.net',
  'cram.com',
  'crunchbase.com',
  'csdn.net',
  'cyber-breeze.com',
  'cybozu.com',
  'davidwalsh.name',
  'dealnews.com',
  'deezer.com',
  'depositfiles.com',
  'desirulez.me',
  'deutschepost.de',
  'deviantart.com',
  'dhl.de',
  'digitalocean.com',
  'directrev.com',
  'diytrade.com',
  'docfoc.com',
  'dochub.com',
  'docker.com',
  'dopa.com.cn',
  'douyu.com',
  'dropbox.com',
  'dumpaday.com',
  'duomai.com',
  'e-monsite.com',
  'egnyte.com',
  'elcomercio.com',
  'elearningindustry.com',
  'elephantjournal.com',
  'empowernetwork.com',
  'enkivillage.com',
  'epom.com',
  'ethtrade.org',
  'evernote.com',
  'exacttarget.com',
  'exblog.jp',
  'excite.co.jp',
  'excnn.xyz',
  'extraimage.net',
  'extratorrent.cc',
  'fabric.io',
  'factmag.com',
  'familyfriendpoems.com',
  'fanfiction.net',
  'fanli.com',
  'fanpop.com',
  'farfetch.com',
  'farpost.ru',
  'fashionback.com',
  'fastmail.com',
  'fb.com',
  'fbcdn.net',
  'fc2.com',
  'fdating.com',
  'feedly.com',
  'filefactory.com',
  'files.wordpress.com',
  'finanzen.net',
  'firestorage.jp',
  'flashcardmachine.com',
  'flickr.com',
  'fling.com',
  'floralinvestment.com',
  'force.com',
  'fortinet.com',
  'forumcommunity.net',
  'freelibros.org',
  'freshdesignweb.com',
  'fullhdfilmizlesene.org',
  'gaana.com',
  'gametwist.com',
  'garena.co.id',
  'gdeposylka.ru',
  'geni.com',
  'getkahoot.com',
  'gfycat.com',
  'girlsaskguys.com',
  'gitter.im',
  'gjoyz.com',
  'glassdoor.ca',
  'glassdoor.co.in',
  'glassdoor.com',
  'gnula.nu',
  'gongchang.com',
  'gooyaabitemplates.com',
  'gopro.com',
  'gota.io',
  'govjobadda.com',
  'grammarist.com',
  'gry-online.pl',
  'gumtree.pl',
  'hatena.ne.jp',
  'hatenablog.com',
  'hclips.com',
  'here.com',
  'heroku.com',
  'heroquizz.com',
  'highlow.net',
  'hightail.com',
  'hitbox.tv',
  'hizliresim.com',
  'hk01.com',
  'hotschedules.com',
  'hrloo.com',
  'hublaa.me',
  'hubspot.com',
  'hubspot.net',
  'iconarchive.com',
  'iemo.jp',
  'iezvu.com',
  'ifixit.com',
  'igeeksblog.com',
  'imgbox.com',
  'imgchili.net',
  'indeed.co.in',
  'indiapost.gov.in',
  'indulgy.com',
  'infogr.am',
  'inspiredtaste.net',
  'invisionapp.com',
  'iphonehacks.com',
  'iqiyi.com',
  'ispot.news',
  'issuu.com',
  'italia-film.me',
  'itslearning.com',
  'japanpost.jp',
  'jimdo.com',
  'jiskha.com',
  'jkforum.net',
  'jobstreet.com',
  'jumia.com.eg',
  'jwplayer.com',
  'kahoot.it',
  'kaskus.co.id',
  'kat.how',
  'kataweb.it',
  'katfile.com',
  'keep2s.cc',
  'kickstarter.com',
  'klipfolio.com',
  'kmail-lists.com',
  'koubei.com',
  'kununu.com',
  'lang-8.com',
  'leadpages.co',
  'leagueoflegends.com',
  'leboncoin.fr',
  'leetchi.com',
  'librus.pl',
  'lifeinthefastlane.com',
  'lineblog.me',
  'linkwithin.com',
  'litv.tv',
  'livedoor.jp',
  'livelib.ru',
  'lofter.com',
  'ly.com',
  'lyricsmode.com',
  'm-load.xyz',
  'mail.gov.in',
  'mama.cn',
  'mamaclub.com',
  'media.tumblr.com',
  'mediafire.com',
  'mercadolibre.com.ar',
  'mercadolivre.com.br',
  'meteor.com',
  'midomi.com',
  'mileroticos.com',
  'minds.com',
  'minecraftskins.com',
  'mixtape.moe',
  'mobafire.com',
  'monstergulf.com',
  'monsterindia.com',
  'mp3goo.com',
  'mql5.com',
  'mycloud.com',
  'mynet.com',
  'myvidster.com',
  'naointendo.com.br',
  'naukri.com',
  'naukrigulf.com',
  'netotrade.com',
  'newgrounds.com',
  'nicovideo.jp',
  'nisa2yat.com',
  'nitroflare.com',
  'niume.com',
  'nuget.org',
  'numbeo.com',
  'office.com',
  'ok.ru',
  'olx.co.ao',
  'olx.com.pk',
  'olx.ph',
  'olx.pt',
  'onehallyu.com',
  'onet.pl',
  'online-tech-tips.com',
  'oomall.com',
  'opensky.com',
  'otakukart.com',
  'ouest-france.fr',
  'outbrain.com',
  'over-blog.com',
  'paigeeworld.com',
  'pantip.com',
  'parenting.com.tw',
  'parsiblog.com',
  'paybox.com',
  'pbworks.com',
  'pearltrees.com',
  'peopleperhour.com',
  'phoenixads.co.in',
  'picarto.tv',
  'pixieset.com',
  'pixiv.net',
  'pixnet.net',
  'pixsense.net',
  'planetcoaster.com',
  'playbuzz.com',
  'plays.tv',
  'plot.ly',
  'pluralsight.com',
  'po.st',
  'podbean.com',
  'policybazaar.com',
  'polycount.com',
  'poringa.net',
  'porlaputa.com',
  'post.at',
  'post.ch',
  'postcron.com',
  'poste.it',
  'postplanner.com',
  'powerschool.com',
  'prezi.com',
  'ptcwall.com',
  'pulsk.com',
  'puu.sh',
  'qiita.com',
  'qualtrics.com',
  'quickmeme.com',
  'quikr.com',
  'quizlet.com',
  'quotesgram.com',
  'qyer.com',
  'raymond.cc',
  're-direcciona.me',
  'readzo.com',
  'redbus.in',
  'remita.net',
  'repelis.tv',
  'researchgate.net',
  'roblox.com',
  'rockfile.eu',
  'rumble.com',
  'ruten.com.tw',
  'safefinder.com',
  'salesforce.com',
  'sarkariexaam.com',
  'scotch.io',
  'segmentfault.com',
  'sfico.com',
  'share-online.biz',
  'sharepoint.com',
  'sharethis.com',
  'shobonnexus.com',
  'shopify.com',
  'shutterfly.com',
  'signup.wordpress.com',
  'simplyrecipes.com',
  'sina.com.cn',
  'sinaimg.cn',
  'siteground.com',
  'skillshare.com',
  'skyrock.com',
  'skyscrapercity.com',
  'sli.mg',
  'slideplayer.com',
  'slideserve.com',
  'smallpdf.com',
  'smartrecruiters.com',
  'smarttech.com',
  'smugmug.com',
  'snagajob.com',
  'socialtrade.biz',
  'solidfiles.com',
  'soundcloud.com',
  'soup.io',
  'souq.com',
  'spareroom.co.uk',
  'speakerdeck.com',
  'splunk.com',
  'steadyhealth.com',
  'steamcommunity.com',
  'steampowered.com',
  'storify.com',
  'studyblue.com',
  'subito.it',
  'sway.com',
  'sxx.com',
  'tableau.com',
  'taboola.com',
  'tamilmv.org',
  'taringa.net',
  'teamunify.com',
  'techsmith.com',
  'tfc.tv',
  'thailandpost.co.th',
  'the-house.com',
  'thejakartapost.com',
  'theoldreader.com',
  'thisav.com',
  'thwglobal.com',
  'tianya.cn',
  'timesjobs.com',
  'tistory.com',
  'to8to.com',
  'toolslib.net',
  'trendingnewsportal.net.ph',
  'trialpay.com',
  'trustpilot.com',
  'truth-out.org',
  'tudou.com',
  'tumblr.com',
  'turbobit.net',
  'tusfiles.net',
  'tvbs.com.tw',
  'twitch.tv',
  'twitlonger.com',
  'twoo.com',
  'txxx.com',
  'typekit.com',
  'typepad.com',
  'ubuntu.com',
  'umeng.com',
  'unity.com',
  'unity3d.com',
  'unzipper.com',
  'uploaded.net',
  'uproxx.com',
  'userecho.com',
  'ustc.edu.cn',
  'vegrecipesofindia.com',
  'venmo.com',
  'veoh.com',
  'veracross.com',
  'vid.me',
  'vidup.me',
  'vimeo.com',
  'visual.ly',
  'visualstudio.com',
  'vitonica.com',
  'vivo.sx',
  'vmall.com',
  'vocaroo.com',
  'wattpad.com',
  'waves.com',
  'waybig.com',
  'webcamtoy.com',
  'webinarjam.net',
  'weebly.com',
  'weheartit.com',
  'weibo.com',
  'wevideo.com',
  'whicdn.com',
  'wikiloc.com',
  'wittyfeed.com',
  'wix.com',
  'wixsite.com',
  'wiziq.com',
  'wolfram.com',
  'woocommerce.com',
  'wordpress.com',
  'wp.com',
  'xcams.nl',
  'xender.com',
  'xitu.io',
  'xpg.uol.com.br',
  'xuite.net',
  'yinxiang.com',
  'youcaring.com',
  'yourarticlelibrary.com',
  'yourbittorrent.com',
  'yourstory.com',
  'yout.com',
  'youtube-mp3.org',
  'yumpu.com',
  'zedo.com',
  'zhihu.com',
  'zillow.com',
  'znanija.com',
  'zoom.us',
  'zoominfo.com',
  'zotero.org'
]

const regexpEscape = function (s) { return s.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&') }

module.exports = {
  retrieve: function (cb) {
    cb(null, platformsSLD.concat(platforms))
  },

  build: function (cb) {
    const transformedList = platforms.map((item) => { return `'${item}'` }).join(', ')
    var condition = `(new Set([ ${transformedList} ])).has(SLD.split('.')[0])`
    platformsSLD.forEach(function (SLD) {
      condition += ' || /' + regexpEscape(SLD) + '$/.test(SLD)'
    })

    const rule = {
      condition: condition,
      consequent: null,
      description: 'exclude platforms'
    }
    cb(null, rule)
  }
}
